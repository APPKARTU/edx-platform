{% extends "main_django.html" %}
{% with online_help_token="oauth2_provider_authorization" %}
{% load theme_pipeline %}{% load sekizai_tags i18n configuration %}{% load url from future %}{% load staticfiles %}

{% block title %}
  {% block pagetitle %}{% endblock %} | {% trans "Authorize" %} | {% platform_name %}
{% endblock %}

{% block body %}
    <main id="main" aria-label="Content" tabindex="-1">
      <section class="container authorize {{ selected_tab }}" id="authorize-content">
        <div class="wrapper-authorize">
            <div class="block-center">
                {% if not error %}
                    <form id="authorizationForm" method="post">
                        <h3 class="block-center-heading">{% trans "Authorize" %} {{ application.name }}?</h3>
                        {% csrf_token %}

                        {% for field in form %}
                            {% if field.is_hidden %}
                                {{ field }}
                            {% endif %}
                        {% endfor %}

                        <p>{% trans "The above application requests the following permissions from your account" %}</p>
                        <ul>
                            {% for scope in scopes_descriptions %}
                                <li>{{ scope }}</li>
                            {% endfor %}
                        </ul>

                        {{ form.errors }}
                        {{ form.non_field_errors }}

                        <div class="control-group">
                            <div class="controls">
                                <button type="submit" class="btn" name="cancel"/>Cancel</button><button type="submit" class="btn" name="allow"/>Allow</button>
                            </div>
                        </div>
                    </form>

                {% else %}
                    <h2>Error: {{ error.error }}</h2>
                    <p>{{ error.description }}</p>
                {% endif %}
            </div>
        </div>
      </section>
    </main>
{% endblock %}

{% endwith %}
